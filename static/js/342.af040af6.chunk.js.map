{"version":3,"file":"static/js/342.af040af6.chunk.js","mappings":"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","sources":["services/pexels.js","views/PexelsImages/ImageCard.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// OOP\r\nexport class PixelsFetchObject {\r\n  constructor(base_url, api_key) {\r\n    this.base_url = base_url;\r\n    this.api_key = api_key;\r\n    this._searchQuery = '';\r\n    this._page = 1;\r\n    this._perPage = 5;\r\n    this.endpoint = '';\r\n  }\r\n\r\n  get searchQuery() {\r\n    return this._searchQuery;\r\n  }\r\n\r\n  set searchQuery(value) {\r\n    return (this._searchQuery = value);\r\n  }\r\n\r\n  get page() {\r\n    return this._page;\r\n  }\r\n\r\n  set page(value) {\r\n    return (this._page += value); // изменяем значение на 1\r\n  }\r\n\r\n  resetPage() {\r\n    return (this._page = 1), (this._perPage = 5);\r\n  }\r\n\r\n  get perPage() {\r\n    return this._perPage;\r\n  }\r\n\r\n  set perPage(value) {\r\n    return (this._perPage = value);\r\n  }\r\n\r\n  searchPhotos() {\r\n    axios.defaults.baseURL = this.base_url;\r\n    axios.defaults.headers.common.Authorization = this.api_key;\r\n    \r\n    this.endpoint = 'search';\r\n    console.log('searchQuery:', this.searchQuery, 'page:', this.page, 'perPage:', this.perPage);\r\n    let params = `?query=${this.searchQuery}&page=${this.page}&per_page=${this.perPage}`;\r\n    let url = this.endpoint + params;\r\n\r\n    return axios.get(url)\r\n      .then((result) => {\r\n        // console.log(result);\r\n        return result.data;\r\n      })\r\n      .then(data => {\r\n        // console.log(data);\r\n       return data.photos\r\n      })\r\n      .catch((err) => {\r\n        (console.log(err));\r\n      })\r\n  }\r\n\r\n  // запрос за 1 картинкой по id\r\n  \r\n  async getImageInfo(id) {\r\n    axios.defaults.baseURL = this.base_url;\r\n    axios.defaults.headers.common.Authorization = this.api_key;\r\n    this.endpoint = 'photos';\r\n    let params = `/${id}`;\r\n    let url = this.endpoint + params;\r\n    try {\r\n      const result = await axios.get(url);\r\n      const data = result.data;\r\n      if (result.status === 400) throw new Error();\r\n      // console.log(data);\r\n      if (result.status === 200) return data;\r\n    } catch (err) {\r\n      // console.log('err', err);\r\n      return err.message;\r\n    }\r\n  }\r\n\r\n   // Перепишем на async\r\n  //  async searchPhotos() {\r\n  //   axios.defaults.baseURL = this.base_url;\r\n  //   axios.defaults.headers.common.Authorization = this.api_key;\r\n    \r\n  //   this.endpoint = 'search';\r\n  //   let params = `?query=${this.searchQuery}&page=${this.searchPage}&per_page=${this.searchPerPage}`;\r\n  //   let url = this.endpoint + params;\r\n\r\n  //   try {\r\n  //     const result = await axios.get(url);\r\n  //     const data = result.data.phtos;\r\n  //     return data;\r\n  //   } catch {err => {\r\n  //     return err.message;\r\n  //   }}\r\n  // }\r\n}\r\n\r\n// DECLARATIVE\r\n// export function PixelsFetchFunc() {\r\n//   const base_url = 'https://api.pexels.com/v1/';\r\n//   const api_key = 'C0c8jsEIkIzHhJ34LClN7vk5fJStc0qpj2n2MRQ5zthwSKBkRibKG5uF';\r\n//   axios.defaults.baseURL = base_url;\r\n//   axios.defaults.headers.common.Authorization = api_key;\r\n\r\n//   const searchPhotos = (searchQuery, searchPage, searchPerPage) => {\r\n//     axios.defaults.baseURL = this.base_url;\r\n//     axios.defaults.headers.common.Authorization = this.api_key;\r\n    \r\n//     let endpoint = 'search';\r\n//     let params = `?query=${searchQuery}&page=${searchPage}&per_page=${searchPerPage}`\r\n//     let url = endpoint + params;\r\n\r\n//     axios.get(url)\r\n//       .then((result) => {\r\n//         console.log(result);\r\n//       })\r\n//       .catch((err) => {\r\n//         (console.log(err));\r\n//       })\r\n//   }\r\n// }\r\n","import { useEffect, useState } from \"react\";\r\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\r\nimport { PixelsFetchObject } from \"../../services/pexels\";\r\n\r\nconst base_url = 'https://api.pexels.com/v1/';\r\nconst api_key = 'C0c8jsEIkIzHhJ34LClN7vk5fJStc0qpj2n2MRQ5zthwSKBkRibKG5uF';\r\nconst x = new PixelsFetchObject(base_url, api_key);\r\n\r\nexport default function ImageCard() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const params = useParams();\r\n\r\n  const [imageInfo, setImageInfo] = useState(null);\r\n  console.log(\"CARD:\", history);\r\n  console.log(location);\r\n  console.log(\"params:\", params);\r\n\r\n  useEffect(() => {\r\n    x.getImageInfo(params.imageId)\r\n    .then(data => setImageInfo(data))\r\n    .catch(err => alert('err'));\r\n  }, [params.imageId]);\r\n\r\n  const handleClick = () => history.push(location?.state?.from?.location ?? '/pexels');\r\n  \r\n  console.log(imageInfo);\r\n  return (\r\n    <>\r\n      <button type=\"button\" onClick={handleClick}>\r\n        {location?.state?.from?.label ?? 'Go back'}\r\n      </button>\r\n      \r\n      {imageInfo ? (\r\n        <article id={imageInfo.id}>\r\n          <h2>{imageInfo.photographer}</h2>\r\n          <img\r\n            src={imageInfo.src.original}\r\n            alt=\"origin size\"\r\n            style={{ objectFit: 'contain', width: '100%' }}\r\n          />\r\n        </article>\r\n      ) : (\r\n        <p>No match found</p>\r\n      )}\r\n    </>\r\n  );\r\n}"],"names":["PixelsFetchObject","constructor","base_url","api_key","this","_searchQuery","_page","_perPage","endpoint","searchQuery","value","page","resetPage","perPage","searchPhotos","axios","defaults","baseURL","headers","common","Authorization","console","log","params","concat","url","get","then","result","data","photos","catch","err","getImageInfo","id","status","Error","message","x","ImageCard","_location$state$from$2","_location$state2","_location$state2$from","history","useHistory","location","useLocation","useParams","imageInfo","setImageInfo","useState","useEffect","imageId","alert","_jsxs","_Fragment","children","_jsx","type","onClick","handleClick","_location$state$from$","_location$state","_location$state$from","push","state","from","label","photographer","src","original","alt","style","objectFit","width"],"sourceRoot":""}